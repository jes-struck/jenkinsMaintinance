import hudson.plugins.emailext.*
import hudson.model.*
import hudson.maven.*
import hudson.maven.reporters.*
import hudson.tasks.*
newJDK = Hudson.getInstance().getJDK("jdk7u51"); 
newGroovy = "groovy 2.2.1"  
def updated = 0
def counter = 0
jobs = Hudson.instance.items
for (item in jobs){
	if(item.name.contains('OATS')){
	    counter++
    	//if (item.JDK == null){
       		for(builder in item.buildersList){
    			if(builder instanceof hudson.plugins.groovy.Groovy) {
                  	printf("%-55s | %4s -> %-8s | %-12s -> %-8s |\n", item.name, item.JDK ,newJDK, builder.groovyName, newGroovy)
                  	item.JDK = newJDK
              		builder.groovyName = newGroovy
    				updated++  	              
            	}
        	}
      	//}
  	}
}

println("Total job: "+counter)
println("Misconfigured jobs" + updated)
